import { useTranslation } from "react-i18next";
import { useAuth } from "../contexts/AuthContext";
import { useBasket } from "../contexts/BasketContext";

function Card({ item }) {
  const { t } = useTranslation();

  const { loggedIn } = useAuth();

  const { addToBasket, items } = useBasket();

  const findBasketItem = items.find(
    (basket_item) => basket_item.id === item.id,
  );

  return (
    <>
      <div key={item.id} className="card mt-20 border-bottom-1">
        <div className="card-content d-flex">
          <img className="img rad-12" src={item.url} alt={`images${item.id}`} />
          <div className="d-flex flex-column p-0-20">
            <div className="name">{item.name}</div>
            <small className="title p-5-0 text-primaryGray">{item.title}</small>
            <div className="d-flex">
              <small className="rank pr-20 d-flex align-items-center">
                <svg
                  className="mr-5"
                  width="14"
                  height="10"
                  viewBox="0 0 14 10"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M7.06142 6.7125L3.14753 9.22701L4.20395 4.54724L0.711337 1.42685L5.28726 1.03331L7.04213 -3.41055L8.81392 1.02594L13.392 1.40036L9.91061 4.53532L10.9848 9.21064L7.06142 6.7125Z"
                    fill="#ECD03F"
                  />
                </svg>
                {item.rank}
              </small>
              <small className="location pr-20 d-flex align-items-center">
                <svg
                  className="mr-5"
                  width="13"
                  height="15"
                  viewBox="0 0 13 15"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M10.3048 10.6591L6.07057 14.9103L1.81945 10.6761C0.97867 9.83863 0.405101 8.77067 0.171275 7.60725C-0.0625514 6.44383 0.0538663 5.2372 0.505807 4.13994C0.957747 3.04269 1.72491 2.10409 2.71029 1.44284C3.69566 0.781585 4.85499 0.42738 6.04168 0.425013C7.22836 0.422646 8.3891 0.772224 9.3771 1.42954C10.3651 2.08686 11.136 3.02239 11.5923 4.11783C12.0486 5.21328 12.1699 6.41943 11.9407 7.58378C11.7115 8.74812 11.1422 9.81835 10.3048 10.6591ZM6.05896 9.09161C6.76621 9.0902 7.44392 8.8079 7.94302 8.3068C8.44212 7.80571 8.72172 7.12687 8.72031 6.41963C8.7189 5.71239 8.43659 5.03467 7.9355 4.53557C7.4344 4.03648 6.75557 3.75688 6.04833 3.75829C5.34108 3.7597 4.66337 4.042 4.16427 4.5431C3.66517 5.04419 3.38557 5.72303 3.38698 6.43027C3.38839 7.13751 3.6707 7.81523 4.17179 8.31432C4.67289 8.81342 5.35172 9.09302 6.05896 9.09161ZM6.0563 7.75828C5.70268 7.75898 5.36327 7.61919 5.11272 7.36964C4.86217 7.12009 4.72102 6.78123 4.72031 6.42761C4.71961 6.07399 4.85941 5.73457 5.10896 5.48402C5.35851 5.23348 5.69736 5.09232 6.05099 5.09162C6.40461 5.09091 6.74402 5.23071 6.99457 5.48026C7.24512 5.72981 7.38627 6.06867 7.38698 6.42229C7.38768 6.77591 7.24788 7.11533 6.99833 7.36588C6.74878 7.61642 6.40993 7.75757 6.0563 7.75828Z"
                    fill="#0DAFC0"
                  />
                </svg>
                {item.location}
              </small>
            </div>
          </div>
        </div>
        <div className="d-flex justify-content-center mx-20">
          {!loggedIn && (
            <>
              <a
                href="/account"
                type="button"
                className="bg-white d-flex align-items-center text-red text-decoration-none"
              >
                <svg
                  className="mr-10"
                  width="14"
                  height="19"
                  viewBox="0 0 14 19"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M6.16665 13.9516C4.48557 13.7276 2.94902 12.8417 1.8693 11.4739C0.789582 10.1061 0.247713 8.35906 0.35383 6.58791C0.459948 4.81676 1.20609 3.15437 2.4406 1.93864C3.67511 0.722902 5.30535 0.0450485 6.99998 0.0428486C8.69668 0.0415255 10.33 0.717724 11.5672 1.93366C12.8044 3.1496 13.5523 4.81377 13.6585 6.5871C13.7648 8.36042 13.2214 10.1094 12.139 11.4778C11.0567 12.8461 9.51686 13.7308 7.83331 13.9516V15.7615C11.1216 15.8418 13.6666 16.3925 13.6666 17.0601C13.6666 17.7826 10.6816 18.3691 6.99998 18.3691C3.31831 18.3691 0.333313 17.7826 0.333313 17.0601C0.333313 16.3925 2.87831 15.8418 6.16665 15.7615V13.9516ZM6.99998 12.2603C8.32606 12.2603 9.59783 11.7087 10.5355 10.7267C11.4732 9.74478 12 8.41297 12 7.02427C12 5.63558 11.4732 4.30377 10.5355 3.32181C9.59783 2.33986 8.32606 1.7882 6.99998 1.7882C5.6739 1.7882 4.40213 2.33986 3.46445 3.32181C2.52676 4.30377 1.99998 5.63558 1.99998 7.02427C1.99998 8.41297 2.52676 9.74478 3.46445 10.7267C4.40213 11.7087 5.6739 12.2603 6.99998 12.2603ZM6.99998 8.76963C6.55795 8.76963 6.13403 8.58574 5.82147 8.25843C5.50891 7.93111 5.33331 7.48717 5.33331 7.02427C5.33331 6.56138 5.50891 6.11744 5.82147 5.79012C6.13403 5.4628 6.55795 5.27892 6.99998 5.27892C7.44201 5.27892 7.86593 5.4628 8.17849 5.79012C8.49105 6.11744 8.66665 6.56138 8.66665 7.02427C8.66665 7.48717 8.49105 7.93111 8.17849 8.25843C7.86593 8.58574 7.44201 8.76963 6.99998 8.76963Z"
                    fill="#E82223"
                  />
                </svg>
                {t("Sepete Ekle")}
              </a>
            </>
          )}
          {loggedIn && (
            <>
              <button
                type="button"
                className={
                  findBasketItem
                    ? "bg-gray d-flex align-items-center text-red"
                    : "bg-white d-flex align-items-center text-red"
                }
                onClick={() => addToBasket(item, findBasketItem)}
              >
                <svg
                  className="mr-10"
                  width="14"
                  height="19"
                  viewBox="0 0 14 19"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M6.16665 13.9516C4.48557 13.7276 2.94902 12.8417 1.8693 11.4739C0.789582 10.1061 0.247713 8.35906 0.35383 6.58791C0.459948 4.81676 1.20609 3.15437 2.4406 1.93864C3.67511 0.722902 5.30535 0.0450485 6.99998 0.0428486C8.69668 0.0415255 10.33 0.717724 11.5672 1.93366C12.8044 3.1496 13.5523 4.81377 13.6585 6.5871C13.7648 8.36042 13.2214 10.1094 12.139 11.4778C11.0567 12.8461 9.51686 13.7308 7.83331 13.9516V15.7615C11.1216 15.8418 13.6666 16.3925 13.6666 17.0601C13.6666 17.7826 10.6816 18.3691 6.99998 18.3691C3.31831 18.3691 0.333313 17.7826 0.333313 17.0601C0.333313 16.3925 2.87831 15.8418 6.16665 15.7615V13.9516ZM6.99998 12.2603C8.32606 12.2603 9.59783 11.7087 10.5355 10.7267C11.4732 9.74478 12 8.41297 12 7.02427C12 5.63558 11.4732 4.30377 10.5355 3.32181C9.59783 2.33986 8.32606 1.7882 6.99998 1.7882C5.6739 1.7882 4.40213 2.33986 3.46445 3.32181C2.52676 4.30377 1.99998 5.63558 1.99998 7.02427C1.99998 8.41297 2.52676 9.74478 3.46445 10.7267C4.40213 11.7087 5.6739 12.2603 6.99998 12.2603ZM6.99998 8.76963C6.55795 8.76963 6.13403 8.58574 5.82147 8.25843C5.50891 7.93111 5.33331 7.48717 5.33331 7.02427C5.33331 6.56138 5.50891 6.11744 5.82147 5.79012C6.13403 5.4628 6.55795 5.27892 6.99998 5.27892C7.44201 5.27892 7.86593 5.4628 8.17849 5.79012C8.49105 6.11744 8.66665 6.56138 8.66665 7.02427C8.66665 7.48717 8.49105 7.93111 8.17849 8.25843C7.86593 8.58574 7.44201 8.76963 6.99998 8.76963Z"
                    fill="#E82223"
                  />
                </svg>
                {findBasketItem ? t("Sepetten Çıkar") : t("Sepete Ekle")}
              </button>
            </>
          )}
        </div>
      </div>
    </>
  );
}

export default Card;
